{"type":"question","id":25479,"title":"关于国产输入法的隐私问题以及如何选择合适的cloudflare IP地址？","uid":24016,"topics":[112,4879,2198,3308],"contents":"葱币不足所以n合1了。<br>\n先图个槽startpage居然不让用tor搜索了。。duckduckgo又特别难用，有没有推荐在tor环境可用的其它搜索引擎？<br>\n前几天看见葱油发帖说国产输入法的隐私问题（https://www.pincong.rocks/article/18937），这里再贴一个实例让大家感受一下。<br>\n<br>\n<br>\nhttps://web.archive.org/web/20200518025523/https://github.com/v2ray/discussion/issues/638<br>\n---<br>\n<i>在使用时发现连qq拼音都在读取我的v2ray配置.<br>\n</i><br>\n<i>发现修改应用程序文件名后并不能让进程名称改变.</i><br>\n<br>\n<i>所以建议伪装下进程名,或者随机生成进程名称.以防止用户在使用v2ray时被其他软件大规模读取配置</i><br>\n---<br>\n<i>请问楼主怎么监测配置被读取</i><br>\n---<br>\n<i>我删除v2ray的时候提示我文件被占用,然后我查看了占用这个文件句柄的进程, 看到QQ拼音打开了我的v2ray文件夹</i><br>\n----<br>\n<br>\n当然这位朋友以为改个进程名就能防止嗅探实在是太天镇哩。。<br>\n<br>\n现在很多人在用cloudflare cdn+ws+tls翻墙，不过速度不是很理想。这里看到一个tips可以提高连接cdn的速率。<br>\n首先cloudflare的很多ip都可以手动指定进行连接，比如甚至大名鼎鼎的1.1.1.1不仅仅可以当作dns服务器，也接受在cdn上网站的请求。具体使用的时候可以这么做：（拿官方示例演示一下）<br>\n<pre>{<br>\n&nbsp; \"inbounds\": [<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; \"port\": 1080,<br>\n&nbsp; &nbsp; &nbsp; \"listen\": \"127.0.0.1\",<br>\n&nbsp; &nbsp; &nbsp; \"protocol\": \"socks\",<br>\n&nbsp; &nbsp; &nbsp; \"sniffing\": {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"enabled\": true,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"destOverride\": [\"http\", \"tls\"]<br>\n&nbsp; &nbsp; &nbsp; },<br>\n&nbsp; &nbsp; &nbsp; \"settings\": {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"auth\": \"noauth\",<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"udp\": false<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; ],<br>\n&nbsp; \"outbounds\": [<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; \"protocol\": \"vmess\",<br>\n&nbsp; &nbsp; &nbsp; \"settings\": {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"vnext\": [<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"address\": \"合适的cloudflare ip地址\", <br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"port\": 443,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"users\": [<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"id\": \"随机uuid\",<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"alterId\": 64<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ]<br>\n&nbsp; &nbsp; &nbsp; },<br>\n&nbsp; &nbsp; &nbsp; \"streamSettings\": {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"network\": \"ws\",<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"security\": \"tls\",<br>\n&nbsp; &nbsp; &nbsp; &nbsp; \"wsSettings\": {<br>\n          \"headers\":{\"Host\":\"你的域名\"}<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"path\": \"/随机字符串\"<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; ]<br>\n}<br>\n</pre><br>\n<br>\n<br>\n以下转载自该网站，每个运营商的最佳ip可能都不一样，可以用批量ping软件测试<br>\n<br>\nhttps://ofvps.com/201907510<br>\n<br>\n<br>\n官方列表：CloudFlare公开的节点<br>\nhttps://www.cloudflare.com/ips/<br>\nCFIP白名单<br>\n173.245.48.0/20<br>\n103.21.244.0/22<br>\n103.22.200.0/22<br>\n103.31.4.0/22<br>\n141.101.64.0/18<br>\n108.162.192.0/18<br>\n190.93.240.0/20<br>\n188.114.96.0/20<br>\n197.234.240.0/22<br>\n198.41.128.0/17<br>\n162.158.0.0/15<br>\n104.16.0.0/12<br>\n172.64.0.0/13<br>\n131.0.72.0/22<br>\n百度云加速与Cloudflare合作节点<br>\n162.159.211.4-103<br>\n103.21.244.0/22<br>\n103.22.200.0/22<br>\n103.31.4.0/22<br>\n104.16.0.0/12<br>\n108.162.192.0/18<br>\n131.0.72.0/22<br>\n141.101.64.0/18<br>\n162.158.0.0/15<br>\n172.64.0.0/13<br>\n173.245.48.0/20<br>\n188.114.96.0/20<br>\n190.93.240.0/20<br>\n197.234.240.0/22<br>\n198.41.128.0/17<br>\nCloudflare节点推荐<br>\nwww.moeelf.com/archives/10.html<br>\n<br>\nCloudFlare 百度云合作 ip：<br>\n<br>\n162.159.208.4-162.159.208.103<br>\n<br>\n162.159.209.4-162.159.209.103<br>\n<br>\n162.159.210.4-162.159.210.103<br>\n<br>\n162.159.211.4-162.159.211.103<br>\n<br>\n各线路推荐列表：<br>\n电信：推荐走圣何塞，例：104.16.160.* 或者上面的百度云合作 ip。<br>\n移动：推荐走移动香港，例：172.64.32.*、141.101.115.* 或者 104.23.240.0-104.23.243.254。<br>\n联通：没发布什么好线路，可走圣何塞。例：104.16.160.* 或者 104.23.240.0-104.23.243.254。也可以试一下走亚特兰大 108.162.236.*（日前不可用。） 。<br>\nQi推荐<br>\n108.162.236.1/24 联通 走美国<br>\n172.64.32.1/24 移动 走香港<br>\n104.16.160.1/24 电信 走美国洛杉矶<br>\n———<br>\n172.64.0.0/24 电信 美国旧金山<br>\n104.20.157.0/24 联通 走日本<br>\n104.28.14.0/24 移动 走新加坡<br>\n（联通移动推荐节点）<br>\n104.23.240.0-104.23.243.254<br>\n（电信推荐百度云合作ip）<br>\n162.159.208.4-162.159.208.103<br>\n162.159.209.4-162.159.209.103<br>\n162.159.210.4-162.159.210.103<br>\n162.159.211.4-162.159.211.103<br>\n适合电信的节点<br>\n104.23.240.*<br>\n走欧洲各国出口 英国德国荷兰等 延迟比美国高一些 适合源站在欧洲的网站<br>\n172.64.32.*<br>\n虽然去程走新加坡，但是回程线路的绕路的，实际效果不好，不推荐<br>\n104.16.160.*<br>\n圣何塞的线路，比洛杉矶要快一点，推荐<br>\n108.162.236.*<br>\n亚特兰大线路，延迟稳定，但是延迟较高<br>\n<br>\n适合移动的节点<br>\n162.158.133.* 走的丹麦，这一段ip只有部分能用，可以自己试一下。绕美国。<br>\n198.41.214.*<br>\n198.41.212.*<br>\n198.41.208.*<br>\n198.41.209.*<br>\n172.64.32.*<br>\n141.101.115.*<br>\n移动走香港的IP段有很多，以上并不是全部。CF移动走香港的分直连和走ntt的效果都挺不错的，不过部分地区晚上还是会丢包。<br>\n172.64.0. 这是走圣何塞的，一般用香港的就行<br>\n172.64.16.* 欧洲线路.绕<br>\n<br>\n1.0.0.1效果较好<br>\n电信部分<br>\n大多数省直接使用1.0.0.0即可，延迟低，丢包少，<br>\n少部分还是需要换ip<br>\n<br>\n新加坡<br>\n172.64.32.0-172.64.47.254<br>\n<br>\n移动部分<br>\n新加坡<br>\n104.18.48.0-104.18.63.255<br>\n104.24.112.0-104.24.127.255<br>\n104.27.128.0-104.27.143.255<br>\n104.28.0.0-104.28.15.255<br>\n<br>\n移动部分<br>\n圣何塞 cogentco.com<br>\n104.28.16.0-31.255<br>\n104.27.144.0-243.254<br>\n104.23.240.0-243.254<br>\n<br>\n香港cloudflare1-100g.hkix.net<br>\n大部分都是这个通道<br>\n1.0.0.0-254<br>\n1.1.1.0-254<br>\n66.235.200.0-254 此段为IPOWER.COM endurance.com专用，有可能被跳转到IPOWER.COM endurance.com页面<br>\n104.16.80.0-95.255<br>\n104.16.175.255-104.16.191.255<br>\n<br>\n香港直连<br>\n23.227.63.0-254 此段为shopify.com专用，有可能被跳转到shopify.com页面<br>\n104.16.0.0-79.255<br>\n104.16.96.0-175.254<br>\n104.16.192.0-207.255<br>\n<br>\n新加坡 ae-0.cloudflare.sngpsi07.sg.bb.gin.ntt.net<br>\n都从香港ntt转发<br>\n104.28.0.0-15.255<br>\n<br>\n联通部分<br>\n伦敦 cloudflare-gw.cr10-lon1.ip4.gtt.net<br>\n172.64.19.16<br>\n=============<br>\n个人测试了一下，大部分ip都还是会绕道美国，少部分地区比如安徽移动可以直连香港，延迟大大下降。有传说可以用百度云加速的ip替代cloudflare，不过试了很久并没有成功。如果可以直连国内的节点相比是最快的。至于隐私问题，虽然tls会被cdn解密，v2ray或者其它翻墙软件自己的加密保证不会有问题就可以了。。不过被注意到了以后path和header分流的部分对于cdn来说都是可见的。。<br>\n<br>\n<br>\n=============<br>\n吐槽之2：最近几天经常能看到服务器日志里有国内ip来主动探测的，建议用v2ray的朋友们千万不要用默认的path，/ray， /v2ray， /，之类的。 cloudflare可以设置防火墙或者page rule，把url里没有path或者是header不对的直接redirect或者challege或者block掉，私以为比服务器上做设置更安全一些。同时在服务器上用iptables完全禁止cloudflare以外的ip地址访问443/80端口。","date":"2020-05-18","agreeCount":9,"discussionCount":1}