{"type":"video_comment","id":18546,"parentType":"video","parentId":1980,"uid":18160,"contents":"cloudflare下的开源项目<br>\n精华真多<br>\n<br>\nhttps://github.com/cloudflare/ngx_brotli_module<br>\n这个，我觉得就可以很适合初学者入门nginx 的module开发<br>\n<br>\n整个 开源项目 ，就一个 代码文件 <b>ngx_http_brotli_filter_module.c</b><br>\n<br>\n入口函数&nbsp; 叫 ngx_http_brotli_filter_init <br>\n给一句 忠告 ，一般你自己写mod ，都是从 postconfiguration 这个函数指针写起的<br>\n这里用到了&nbsp; <b>装饰器</b> 设计模式，会python的话，就理解为 @ <br>\n<br>\nngx_http_brotli_header_filter&nbsp; 针对 http的 报文头<br>\n说白了就是修改 Content-Encoding 字段 为 br <br>\n<br>\nngx_http_brotli_body_filter 针对 http的 body<br>\n说白了 就是对原来的body 进行 ngx_http_brotli_filter_compress 压缩<br>\n<br>\n这样，http的body就是br压缩的后的buffer了~","date":"2020-05-10","agreeCount":1,"discussionCount":0}