{"type":"video_comment","id":17744,"parentType":"video","parentId":1872,"uid":18160,"contents":"<center><b>0x0 故事背景</b></center><br>\n在Linux的世界裏，<b>萬物皆文件</b>。<br>\n<br>\n擧個例子，《<b>你的名字</b>》電影，你們看過麽？<br>\n三葉打開自己的作業本，看到了瀧留下來的文字。同樣的瀧也可以看到三葉給自己的留言。這個過程，在操作系統裏，叫做通信。<br>\n<br>\n我們沒法和人直接通信的時候，就會用<b>類似留言</b>的方法，達到通信的效果。<br>\n在操作系統裏，<b>文件【File】</b>作爲留言的媒介。所以，把一切當作<b>文件</b>吧~<br>\n<br>\n<br>\n<br>\n<center><b>0x1 概要設計</b></center><br>\nVPN 可以分爲兩個部分來實現，<b>設備 </b>和 <b>通信</b>。<br>\n第一個部分，我們需要模擬一張網卡【設備，亦或者我說的<b>文件</b>】<br>\n第二個部分，我們需要讓虛擬網卡，可以發送網絡數據。【通信，和真實網卡通信】<br>\n<br>\n開始抽象了對不對？繼續剛才的例子吧~<br>\n假設三葉的作業本有個名字，叫虛擬網卡，三葉是真實網卡，瀧是火狐瀏覽器。<br>\n瀧在三葉的作業本上寫了字，三葉在第二天就可以看到了~<br>\n<br>\n翻譯成VPN：<br>\n火狐瀏覽器【立花瀧】，告訴虛擬網卡【在作業本留言】，我要去訪問Google。<br>\n真實網卡【宮水三葉】，通過閲讀虛擬網卡上的留言，就去訪問Google了~<br>\n<br>\n<br>\n大概僞代碼長這樣<br>\n<br>\n<pre>int main()<br>\n{<br>\n\t// 創建一張虛擬網卡<br>\n\t虛擬網卡 device = new 虛擬網卡();<br>\n\t<br>\n\twhile(true) {<br>\n\t\t// 從虛擬網卡讀取數據<br>\n\t\tBuffer buffer = new Buffer()<br>\n\t\tdevice.read(buffer);<br>\n\t\t<br>\n\t\t// 告訴真實網卡<br>\n\t\tnetwork.send(buffer);<br>\n\t\t<br>\n\t\t// 從真實網卡讀取數據<br>\n\t\tnetwork.recv(buffer);<br>\n\t\t<br>\n\t\t// 寫到虛擬網卡<br>\n\t\tdevice.write(buffer);<br>\n\t}<br>\n\t<br>\n\treturn 0;<br>\n}</pre>","date":"2020-05-01","agreeCount":0,"discussionCount":0}