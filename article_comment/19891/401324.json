{"type":"article_comment","id":401324,"parentType":"article","parentId":19891,"uid":18160,"contents":"一句话总结：<br>\n反应器模式：evloop把“IO操作”放到handler的信箱。<br>\n前摄器模式：handler把“IO操作”放到evloop的信箱。<br>\n-----------------------------<br>\n反应器模式，由于IO操作在handler线程，所以IO阻塞会导致业务代码无法运行<br>\n<b>不是很建议在网络不好的环境下使用反应器模式</b><br>\n-----------------------------<br>\n另外，<b>一个进程起多少线程问题</b><br>\n我自己的建议是 <b>看你cpu多少核吧</b><br>\n假设是AMD那种 32核64线程的，<b>就起64个线程</b>！<br>\n如果没有超线程的CPU，比如老的i5，4核4线程，<b>就老老实实4个线程</b>。。。<br>\n也不绝对。。。<br>\n好多开源项目，<b>我看高并发的时候都4000多线程了</b>。。。。<br>\n-----------------------------<br>\nwindows下，建议“<b>单进程多线程</b>”，因为windows下进程上下文切换很慢，但是线程上下文切换很快！<br>\nlinux下，建议“<b>多进程单线程</b>”，因为linux下进程和线程上下文切换<b>开销差不多</b>！但是一个线程挂了，整个进程就挂了！一个进程挂了不会影响其他进程！所以多进程有更好的稳定性！","date":"2020-06-02","agreeCount":2,"discussionCount":0}