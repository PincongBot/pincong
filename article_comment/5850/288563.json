{"type":"article_comment","id":288563,"parentType":"article","parentId":5850,"uid":18160,"contents":"我猜某些人在VPS上架了V2Ray，然后Tor去连v2ray的socks5代理上网的。<br>\n我想可以直接省去中间环节，直接在VPS部署meek网桥服务端，然后自己电脑上登陆自己的meek网桥，而不是内建的meek azure就可以了，因为整个meek就自己用，所以比内建的meek快很多<br>\n<br>\n画个图<br>\n你 -&gt; Tor浏览器 -socks5-&gt; v2ray 客户端 -&gt; v2ray服务端-&gt; 目标网站<br>\n修改成<br>\n你 -&gt; Tor浏览器&nbsp; -&gt; meek服务端-&gt; 目标网站<br>\n<br>\nmeek网桥服务端代码meek-server.go<br>\n<b>怎么部署？建议你学习下go语言！！！</b><br>\n启动的话，执行下面的命令[<b>记得防火墙得放行</b>]<br>\n<pre>ServerTransportPlugin meek exec ./meek-server --log meek-server.log --port 7002 --cert cert.pem --key key.pem</pre><br>\n<b>查看网桥字符串。执行下面这个命令</b><br>\n<pre>cat /var/lib/tor/pt_state/meek打头的txt文件<br>\n内容类似<br>\nmeek 你的ip:7002 url=https://aaaa/ front=bbb</pre><br>\n<br>\n在你的电脑上，打开TOR浏览器，然后点击配置，选择使用网桥<br>\n选择第三个radio button<br>\n复制粘贴刚才文本里的内容<br>\n点击ok，就可以上网了。也就是少了设置代理那个步骤<br>\n<br>\n<b>---------有点事，不截图了，长话短说--------</b><br>\n原理解释：打开meek-server.go这个代码文件<br>\n简单讲就是meekserver起了一个http服务器<br>\n只处理get和post两种请求！<br>\n如果收到了get请求，返回http response<br>\n内容就是一句话I’m just a happy little web server.\\n<br>\n<br>\n如果是post请求<br>\n那么就会调用pt.DialOr(&amp;ptInfo, req.RemoteAddr, ptMethodName) 去连接TOR网络<br>\n然后通过<br>\nfunc transact(session *Session, w http.ResponseWriter, req *http.Request) error <br>\n函数，来转发请求到tor网络，并把应答返回给你<br>\n<br>\n整个翻墙过程，就像你在浏览一个正常网站一样！<br>\n所有交互都是正常的https请求<br>\n<br>\n至于pt.DialOr 代码，在git.torproject.org/pluggable-transports/goptlib.git<br>\n<br>\n<br>\n写起来太长了。。有点事情，不细写了","date":"2020-03-08","agreeCount":5,"discussionCount":0}