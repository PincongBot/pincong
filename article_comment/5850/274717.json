{"type":"article_comment","id":274717,"parentType":"article","parentId":5850,"uid":18160,"contents":"http 1.0 跑在 tcp协议上，明文传输<br>\n共产党，应该是检查head的host字段和body里的关键字屏蔽<br>\n<br>\nhttp 2.0 跑在TLS协议上【TCP上的叫TLS，UDP上的DTLS】<br>\n最大的优势，我觉得是密文传输，头部压缩，多路复用<br>\n共产党目前没法破解密文，所以是根据TLS的握手消息里的server name字段来TCP 重置<br>\n<br>\nhttp 3.0 据说改成用了UDP协议，貌似是自己实现了一套DTLS吧<br>\n目前叫QUIC。。。共产党好像无条件把QUIC协议都封杀了？<br>\n<br>\n然后是DNS，裸的DNS只能走53端口，所以共产党是全网污染所有53端口的，还是DOH安全<br>\n<br>\nUDP协议没有handshake协议，所以不像TCP会被链接重置<br>\n但是UDP无状态！<br>\n所以没有办法像TCP那样在服务端使用select poll epoll kqueue等方式多路复用<br>\n<br>\n<br>\n举个例子，如果是tcp协议，那么每一个浏览器来连接服务器，服务器代码都会新建一个client的socket<br>\n然后通过select方式，轮询每个client socket，实现多路<br>\n<br>\n但是udp协议，服务端就没有这个socket了。。。<br>\n我也在看nginx的源码，思考nginx的现有框架如何实现quic协议<br>\n<br>\nnginx的现有代码逻辑<br>\n所有的操作都是add event到一个队列，分r队列读队列和w队列写队列<br>\n然后在对应的线程执行process event<br>\n<br>\n但是关键，我没有理解udp的select用法，很稀有的写法<br>\n我在stackoverflow里看到的都是推荐udp单线程，性能最好了<br>\n如果pincong移到quic协议，估计还有很长的路要走<br>\n<br>\n<br>\n如果是高并发的情况下，quic协议真的比spdy协议快么，对服务器资源的开销更低么？<br>\n为什么guic协议不直接跑在DTLS上呢？","date":"2020-03-01","agreeCount":3,"discussionCount":0}