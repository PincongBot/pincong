{"type":"article_comment","id":280363,"parentType":"article","parentId":15493,"uid":31774,"contents":"补充下Apache的配置，给用Apache的人方便：<br>\n<br>\nApache配置：<br>\nApache需要编译安装较新版本，系统自带默认2.2版本不支持ws，建议用LAMP一件安装脚本编译安装Apache（只需安装Apache别的不用），配置Apache&nbsp;https并访问网站测试正常后：<br>\n<br>\n1.开启必要模块<br>\nssl<br>\nproxy<br>\nproxy_wstunnel<br>\nproxy_http<br>\nrewrite<br>\nheaders<br>\n<br>\nvi /etc/httpd/httpd.conf<br>\n或<br>\nvi /usr/local/apache/conf/httpd.conf<br>\n<br>\n一般配置好Apache后只需再开启：<br>\nLoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so<br>\n<br>\n2.配置HTTPS虚拟服务器支持V2ray<br>\nvi /etc/httpd/extra/httpd-ssl.conf<br>\n或<br>\nvi /usr/local/apache/conf/extra/httpd-ssl.conf<br>\n<br>\n以如下path，端口为例：<br>\n&nbsp;\"path\": \"/XXXXXXX_Path\"<br>\n端口：10000<br>\n<br>\n在&lt;VirtualHost _default_:443&gt;内添加：<br>\n<br>\n&nbsp;&nbsp;&nbsp;&lt;LocationMatch \"/XXXXXXX_Path\"&gt;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;ProxyPass ws://127.0.0.1:10000/XXXXXXX_Path upgrade=WebSocket<br>\n&nbsp;&nbsp;&nbsp;&nbsp;ProxyAddHeaders Off<br>\n&nbsp;&nbsp;&nbsp;&nbsp;ProxyPreserveHost On<br>\n&nbsp;&nbsp;&nbsp;&nbsp;RequestHeader set Host %{HTTP_HOST}s<br>\n&nbsp;&nbsp;&nbsp;&nbsp;RequestHeader set X-Forwarded-For %{REMOTE_ADDR}s<br>\n&nbsp;&nbsp;&nbsp;&lt;/LocationMatch&gt;<br>\n<br>\n重启Apache：<br>\nservice httpd restart","date":"2020-03-04","agreeCount":7,"discussionCount":0}