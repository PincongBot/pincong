{"type":"article_comment","id":285957,"parentType":"article","parentId":15493,"uid":29332,"contents":"其实nginx的配置中加几行代码就可以实现反向代理（俗称镜像），不用去上传模板网站，个人也觉得也更安全，前提是你做的镜像站能在墙内直连，没有什么敏感内容，最好是图片站之类的。<br>\n<br>\n下面贴出反向代理部分的单独代码<br>\n<pre>listen 80;<br>\n&nbsp; &nbsp; server_name&nbsp; www.XXX1.com;&nbsp; <br>\n&nbsp; &nbsp; location / {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_pass https://www.XXX2.com;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_redirect&nbsp; &nbsp;&nbsp; off;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_connect_timeout&nbsp; &nbsp; &nbsp; 75; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_send_timeout&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 90; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_read_timeout&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 90; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_buffer_size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_buffers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 32k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_busy_buffers_size&nbsp; &nbsp; 64k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_temp_file_write_size 64k; <br>\n&nbsp; &nbsp;&nbsp; }</pre><br>\n解释一下，www.XXX1.com为你自己注册的域名，www.XXX2.com为你想镜像网站的网址。推荐几个网站：<a href=\"https://freerangestock.com/\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">Free Stock&nbsp; /&nbsp; </a><a href=\"https://unsplash.com/\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">Unsplash&nbsp; /</a><a href=\"https://www.pexels.com/\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">&nbsp; Pexels</a>&nbsp; ，这几个站是著名的免费图片站，国内好多自媒体都在使用上面的图片<br>\n下面贴出nginx的一套常用配置（仅供参考）<br>\n<pre>server {<br>\n&nbsp; &nbsp; listen 443 ssl;  ##是你用客户端连接的端口，可自定义，推荐443端口<br>\n&nbsp; &nbsp; ssl on;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>\n&nbsp; &nbsp; ssl_certificate&nbsp; &nbsp; &nbsp;&nbsp; /key/certificate.pem;&nbsp; ##你存放证书的位置，切勿照抄<br>\n&nbsp; &nbsp; ssl_certificate_key&nbsp;&nbsp; /key/key.key;  ##你存放密钥的位置，切勿照抄<br>\n&nbsp; &nbsp; ssl_protocols&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; TLSv1 TLSv1.1 TLSv1.2;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; ssl_ciphers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; HIGH:!aNULL:!MD5;<br>\n<br>\n&nbsp; &nbsp; listen 80;<br>\n&nbsp; &nbsp; server_name&nbsp; www.XXX1.com;&nbsp; <br>\n&nbsp; &nbsp; location / {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_pass https://www.XXX2.com;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_redirect&nbsp; &nbsp;&nbsp; off;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_connect_timeout&nbsp; &nbsp; &nbsp; 75; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_send_timeout&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 90; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_read_timeout&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 90; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_buffer_size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_buffers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 32k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_busy_buffers_size&nbsp; &nbsp; 64k; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_temp_file_write_size 64k; <br>\n&nbsp; &nbsp;&nbsp; }<br>\n<br>\n&nbsp; &nbsp; location /etc/ws {  ##路径可自定义，需和客户端保持一致<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_redirect off;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://127.0.0.1:44222; ##与V2ray中设置的监听端口一致<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_http_version 1.1;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header Upgrade $http_upgrade;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header Connection \"upgrade\";<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header Host $http_host;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_read_timeout 300s;<br>\n&nbsp; &nbsp; }<br>\n}</pre>","date":"2020-03-08","agreeCount":2,"discussionCount":0}