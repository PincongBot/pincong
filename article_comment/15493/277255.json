{"type":"article_comment","id":277255,"parentType":"article","parentId":15493,"uid":20551,"contents":"借楼，补充一下配置时经常遇到的问题和解决方案<br>\n-------<br>\n<b>1. 没有Nginx安装源</b><br>\n某些VPS商家提供的系统中，没有带nginx的安装源。因此在运行V2Ray和Nginx的一键安装命令时会出现以下错误：<br>\n<blockquote>Loaded plugins: fastestmirror<br>\nLoading mirror speeds from cached hostfile<br>\n* base: xxxxxx<br>\n* extras: xxxxxx<br>\n* updates: xxxxxx<br>\nNo package nginx available.<br>\nError: Nothing to do <br>\n</blockquote><br>\n<b>解决办法</b>：手动添加安装源即可，根据你的系统版本，运行以下命令：<br>\n（2020，4月更新）<br>\nCentOS7：（这是大多数VPS的系统版本）<br>\nrpm -ivh https://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.18.0-1.el7.ngx.x86_64.rpm<br>\n<br>\nCentOS8：<br>\nrpm -ivh https://nginx.org/packages/centos/8/x86_64/RPMS/nginx-1.18.0-1.el8.ngx.x86_64.rpm<br>\n<br>\nCentOS6：<br>\nrpm -ivh https://nginx.org/packages/centos/6/SRPMS/nginx-1.18.0-1.el6.ngx.src.rpm<br>\n<br>\n<b>2. V2Ray安装问题</b><br>\n换成以下一键命令：<br>\nyum install -y curl &amp;&amp; yum install -y nginx &amp;&amp; bash &lt;(curl -L -s https://install.direct/go.sh)<br>\n<br>\n<b>3. 使用IPv6</b><br>\nNginx不会主动监听IPv6地址，如果配置了AAAA记录，需要在端口号前加上[::]:<br>\n填好之后：<br>\n<pre> <br>\nlisten [::]:80;<br>\nlisten [::]:443 ssl http2;</pre><br>\n<br>\n<b>4. 提示“重定向次数过多”</b><br>\n登录cloudflare，在网站管理界面，点【SSL/TLS】。<br>\n在页面的四个选项中，选【full】。（默认为【flexible】）<br>\n<br>\n<b>5. 客户端出现如下502错误</b><br>\n[Warning] failed to handler mux client connection &gt; v2ray.com/core/proxy/vmess/outbound: failed to find an available destination &gt; v2ray.com/core/common/retry: [v2ray.com/core/transport/internet/websocket: failed to dial WebSocket &gt; v2ray.com/core/transport/internet/websocket: failed to dial to (wss://你的域名): <b>502 Bad Gateway</b> &gt; websocket: bad handshake] &gt; v2ray.com/core/common/retry: all retry attempts failed <br>\n原因：Nginx无法把流量转发给V2Ray，原因是没有关闭SELinux。<br>\n解决办法：按照3.3节的方法，关闭SELinux。输入：<br>\nsetsebool -P httpd_can_network_connect 1 &amp;&amp; setenforce 0 <br>\n即可","date":"2020-03-01","agreeCount":12,"discussionCount":0}