{"type":"article","id":15960,"title":"Tor命令行版本（不含浏览器捆绑）的使用指南，兼Tor技术简介","uid":26126,"topics":[1174,112,249,7603],"contents":"<b>阅读本文之前，请先确认：</b><br>\n<ul><li>你可以翻墙上网</li><li><b>警告：本文的安全系数比编程随想低很多，如果你需要编程随想的那种安全性，请不要继续阅读本文。</b></li></ul><br>\n<br>\n<b>什么是Tor？</b><br>\n<ul><li>Tor是一种通过【层层加密】【到处兜圈】，让网站无法知道你的ip地址（从而抓不到你），在需要的时候也可以让你无法知道网站的ip地址（从而抓不到建网站的人）的技术。</li><li>Tor让你在网络上接近于【匿名】，适合用来干坏事。</li><li>要使用这个技术，你需要安装Tor客户端。</li></ul><br>\n<br>\n<b>Tor的好处</b><br>\n<ul><li>假如明天品葱站长被国安抓到了，国安要求站长记录所有品葱用户的IP地址，然后根据这些IP地址抓人，由于用Tor上品葱的人不会暴露自己的IP地址，所以国安查不出他们是从哪里来的。</li><li>你可能会说，我已经有了SS/SSR/V2ray/无界/自由门/赛风/蓝灯/迷雾通之类的翻墙代理，品葱只能看到我在国外的IP，看不到我在国内的IP。</li><li>但你的翻墙服务提供商、云服务提供商都可能会出卖你。虽然他们不是中国公司，但他们的员工可能会被中国政府收买，从而暴露你的【国内IP地址】甚至【用翻墙服务看过哪些网站】。用Tor可以避免这些问题。</li><li>品葱站长如果在Tor网络上搭建网站，就不需要花钱租云服务器（可以直接在自家电脑上搞），不用担心暴露自己的真实身份。</li></ul><br>\n<br>\n<b>Tor的缺点</b><br>\n<ul><li>由于【层层加密】【绕来绕去】，所以速度慢，延迟高，偶尔不稳定。</li><li>因此大家通常只用Tor【发表敏感言论】（比如在品葱爆料王岐山的私生子之类的），其他日常网络活动，比如看YouTube，通常就不用Tor。</li><li>Tor在中国完全无法正常使用，因为中国国家防火墙将所有你能够连上的Tor节点（中转服务器）都屏蔽了。但只要你跑到中国以外，Tor就会恢复正常。</li><li>伊朗不算中国以外。</li><li>各种原因加在一起，导致在中国用Tor的人极少。如果把品葱搬到Tor网络中，人气会直接归零。</li></ul><br>\n<br>\n<b>安装Tor</b><br>\n<br>\n在Tor官网，只能下载到TorBrowser（Tor浏览器），也就是把Tor客户端和火狐浏览器绑在一起。<br>\n绑在一起之后体积比较大，用起来也比较麻烦，尤其是很多人更喜欢用自己日常的浏览器，不习惯TorBrowser。<br>\n所以我推荐命令行（文字界面）版本的Tor客户端。<br>\n<br>\nWindows（Tor专家包）下载:&nbsp;<a href=\"https://www.softpedia.com/get/Security/Security-Related/Tor.shtml#download\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://www.softpedia.com/get/Security/Security-Related/Tor.shtml#download</a><br>\n<br>\n谢谢网友&nbsp;<a href=\"https://pincong.rocks/people/qwerty8964\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">qwerty8964 (UID:42536 声望:0)</a>&nbsp;的提醒，在Tor官网也可以下载到Windows专家包：<br>\n<a href=\"https://pincong.rocks/url/link/aHR0cHM6Ly93d3cudG9ycHJvamVjdC5vcmcvZG93bmxvYWQvdG9yLw\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://www.torproject.org/download/tor/</a><br>\n<br>\nMac:&nbsp;<br>\n如果你的Mac没有安装Homebrew，请参考 brew.sh 网站介绍，事先在终端输入下面的命令，安装Homebrew：<br>\n<pre>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"</pre><br>\n然后在终端输入命令，安装tor：<br>\n<pre>brew install tor</pre><br>\n如果以上命令无法正常执行，可能是因为github或者别的什么网站被墙了/速度极慢。遇到这种情况，可以先在终端输入以下命令，再输入上述命令：<br>\n<pre>export https_proxy=127.0.0.1:8888</pre><br>\n其中8888请改为你在Mac上的翻墙软件的本地HTTP代理端口。（如果你不知道这个端口是什么，后面会讲）<br>\n<br>\n<b>FBI Warning</b><br>\n如果你只是小白，请不要继续阅读此文，乖乖用TorBrowser（Tor捆绑浏览器）就好，因为那样虽然用起来有点麻烦，但安全系数更高。<br>\n<br>\n<b>运行Tor</b><br>\n<ul><li>Windows: 解压后双击Tor.exe即可。</li><li>Mac: 在终端输入tor即可。</li></ul><br>\n<br>\n<b>如果Tor连上了，你会看到：</b><br>\n<b><a href=\"https://i.imgur.com/qbH7TgG.jpg\" rel=\"nofollow noreferrer noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/qbH7TgG.jpg\" alt=\"https://i.imgur.com/qbH7TgG.jpg\" style=\"max-width:100%\"></a></b><br>\n<br>\n上图有三个红色的框，意思分别是：<br>\n<ol><li>从配置文件torrc读取配置</li><li>Tor客户端在本地开设了Socks代理和HTTP代理，端口分别是9050和9051</li><li>如果显示100% done就是连上了。</li></ol><br>\n<br>\n<b>连不上怎么办</b><br>\n<br>\n中国大陆无法直接连接Tor网络，我们需要创建一个配置文件，告诉Tor应该怎么办。<br>\n<br>\n配置文件（Windows）：在tor.exe旁边新建一个叫做torrc的文件，用记事本打开，添加内容如下：<br>\n<pre>Socks5Proxy 127.0.0.1:9999</pre><br>\n其中9999请改为你的翻墙软件的本地SOCKS5代理端口。意思就是告诉Tor客户端，我们现在是在中国，不能直接连接Tor网络，请Tor客户端通过本机的9999端口（翻墙软件）翻墙，翻出去之后再连接Tor网络。<br>\n然后再运行Tor客户端，确保Tor从你刚才创建的文件里读取了配置，应该就能连上了。<br>\n<br>\n<b>我的翻墙软件的SOCKS5代理和HTTP代理，端口号在哪里可以看到？</b><br>\n<br>\n不管你是用SS/SSR/无界/赛风/蓝灯/迷雾通，这些软件在本地都会开放SOCKS5代理以及/或者HTTP代理，有的软件可以指定代理的端口号，有的软件则是固定的。<br>\n<br>\n如果你不知道你的翻墙软件的SOCKS5代理在哪里可以查看，请谷歌“[翻墙软件名字] SOCKS5 代理”。<br>\n<br>\n<b>Tor的配置文件还有哪些选项可以调整？</b><br>\n参见&nbsp;<a href=\"https://2019.www.torproject.org/docs/tor-manual.html.en\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://2019.www.torproject.org/docs/tor-manual.html.en</a><br>\n<br>\n<b>现在Tor连上了，然后我的浏览器要怎么设置？</b><br>\n<br>\n你需要在你的浏览器上安装【代理管理器】，通常是一个插件，可以让你根据不同的网址，切换所使用的代理服务器。比如说，上youtube的时候，就用普通的翻墙。上品葱的时候，就用Tor。<br>\n<br>\n以Chrome为例，你需要安装SwitchyOmega插件（请从chrome应用商店下载）。然后如下配置：<br>\n<br>\n<ul><li>点【新建情景模式】，名称写【正常翻墙】，类型选择【代理服务器】，然后点【创建】。</li><li>我平时翻墙用SSR，我的SSR在本地的SOCKS5代理端口是1080。所以我在【代理协议】选择【socks5】，【代理服务器】填【127.0.0.1】（本机），【代理端口】填1080，然后点【应用选项】。</li><li>点【新建情景模式】，名称写【匿名作死】，类型选择【代理服务器】，然后点【创建】。</li><li>【代理协议】选择【socks5】，【代理服务器】填【127.0.0.1】（本机），【代理端口】填9050（也就是Tor客户端在本地的代理端口），然后点【应用选项】。</li><li>点【新建情景模式】，名称写【切换自如】，类型选择【自动切换模式】，然后点【创建】。</li><li>【默认情景模式】选【正常翻墙】。</li><li>然后点【添加条件】，【条件类型】选【域名通配符】，【条件设置】填 【*pincong*】（左右各一个星号），【情景模式】选【匿名作死】。最后点【应用选项】。</li><li>配置完成。以后你选择【切换自如】情景模式的时候，访问除了品葱之外的所有网站都是【正常翻墙】，只有访问品葱的时候是【匿名作死】（通过Tor网络访问）。</li></ul><br>\n<br>\n<b>我想测试一下我到底有没有被Tor网络匿名<br>\n</b><br>\n请选择【匿名作死】情景模式，然后访问&nbsp;<a href=\"https://check.torproject.org/\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://check.torproject.org/</a>，网站会告诉你答案的。","date":"2020-03-09","agreeCount":15,"discussionCount":0}