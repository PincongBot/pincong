{"type":"article","id":14474,"title":"品葱声望机制详解（已更新：字数声望关系图","uid":26126,"topics":[5672,7236,5147,7594],"contents":"（开始之前，请习明泽先回复一下<a href=\"https://pincong.rocks/question/18330\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://pincong.rocks/question/18330</a>）<br>\n<br>\n品葱的程序是从WeCenter 3.1.9版修改而来。<br>\n品葱程序的源码参见&nbsp;<a href=\"https://github.com/pincong/pincong-wecenter/\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://github.com/pincong/pincong-wecenter/</a><br>\n品葱对声望的处理方式，相比原版WeCenter有修改。<br>\n<br>\n以下是代码详解。<br>\n<br>\n<ul><li>当用户A给用户B点赞的时候，用户B的点赞数会增加，但声望不一定增加。</li><li>如果用户A的声望大于30，则用户A本次点赞为用户B声望+1，否则+0。（也就是说只有声望大于30的用户给你点赞，你的声望才有可能增加）。</li><li>+1声望是默认值，如果被点赞的内容字数超过100字，有额外的字数奖励（比如从+1声望变成+1.5声望）。字多奖励也多，但是计算公式比较复杂<s>（而且怎么看都觉得有bug）</s>，在此不细介绍，有兴趣的同学自己去看代码<s>（我已经警告过你们了）</s>。</li><li>用户A点赞的权重会随着他之前一周的点赞次数增加而减少（比如说用户A之前一周大量到处点赞，现在给用户B点赞的时候，就从+1声望变成+0.4声望）。（也就是说到处点赞的人，他的赞给你加的声望可能会少于1）</li><li>声望是<s>浮点数</s>定点数，小数点后6位，显示的时候取整。</li><li>上面提到的具体数值只有习明泽知道，需要在网站后台设置，代码里没有，只能等公主公布。</li><li>上面提到的具体数值可以随意修改，所以新人可能会发现声望特别难获得，而很多老人声望高得离谱。</li></ul><br>\n----<br>\n编辑：<br>\n声望和字数的关系，由于习明泽拒绝透露具体参数，根据&nbsp;<br>\n<a href=\"https://github.com/pincong/pincong-wecenter/blob/master/models/vote.php#L178\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">https://github.com/pincong/pincong-wecenter/blob/master/models/vote.php#L178</a><br>\n我们假设品葱开启了bonus_factor（因为如果没有开启的话不会去修改这部分的代码），假设bonus_min_count为200, bonus_max_count为2000，bonus factor 从0到2变化。<br>\n<br>\n本人亲自作图如下：<br>\n<a href=\"https://i.imgur.com/XyyKIt6.png\" rel=\"nofollow noreferrer noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/XyyKIt6.png\" alt=\"https://i.imgur.com/XyyKIt6.png\" style=\"max-width:100%\"></a><br>\n这个图可以这么理解：<br>\n<ul><li>当你的文章字数在0和200汉字（汉字数按照字节数/3计）时，获得声望 = 默认声望x1.0</li><li>当你的文章字数超过1000时，你的声望会以一个类sigmoid函数逐渐增加，接近2000字时封顶，封顶值为bonus_factor值。</li><li>当你的文章字数在200汉字和1000汉字之间时，你获得的声望将会相对于1000字以上的情况，打5折，理由不明</li></ul><br>\n<br>\n总结：<br>\n想赚声望，要么写短回答，要么写超过一定字数的长回答。<a href=\"https://i.imgur.com/H75Fchy.png\" rel=\"nofollow noreferrer noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/H75Fchy.png\" alt=\"https://i.imgur.com/H75Fchy.png\" style=\"max-width:100%\"></a><a href=\"https://i.imgur.com/H75Fchy.png\" rel=\"nofollow noreferrer noopener\" target=\"_blank\"><img src=\"https://i.imgur.com/H75Fchy.png\" alt=\"https://i.imgur.com/H75Fchy.png\" style=\"max-width:100%\"></a>","date":"2020-02-13","agreeCount":27,"discussionCount":0}