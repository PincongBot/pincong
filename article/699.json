{"type":"article","id":699,"title":"暗網架站首部曲-Tor","uid":2409,"topics":[1175,1176,1174],"contents":"洋蔥路由上的網站(有.onion後綴)，只能透過Tor訪問。<br>\n以前叫隱式服務(Hidden Service)，現改名為洋蔥服務(Onion Service)。<br>\n<br>\n<br>\n據Tor官網( https://www.torproject.org/docs/tor-onion-service.html.en )和網路資料寫成這篇文章，簡述架設洋蔥站的方法。<br>\n對於有經驗者，架設洋蔥服務和架一般網站幾乎一樣，比較特別的是私鑰(private_key)和主機名(hostname)而已。<br>\n對於一般用戶，以下利用個人電腦示範架設洋蔥網站，盡量簡化、直觀化，僅供「嘗鮮」。<br>\n若有問題歡迎提出。<br>\n<br>\n準備材料: 洋蔥瀏覽器、網頁伺服軟體、虛擬機(可選)<br>\n<br>\n1. 洋蔥瀏覽器可到 https://www.torproject.org/download/download-easy.html.en 下載。<br>\n<br>\n2. 網頁伺服軟體(Web server)，我選用視覺化的組合包XAMPP，可到 https://www.apachefriends.org/download.html 下載。<br>\n還有很多web servers如Apache/nginx可選，原理都一樣。<br>\n其實Tor以前曾呼籲用戶使用Savant( http://savant.sourceforge.net )，不過此建議現已從文中移除。<br>\n<br>\n3. 官方建議用虛擬機增加安全性，不過此篇文章內不會示範。<br>\n用VBox或VMware都可(個人偏好免費的VBox)，它的用處是降低配置出錯時的安全疑慮。(潛台詞應該是方便湮滅證據)<br>\n載點為 https://www.virtualbox.org 和 https://my.vmware.com/en/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0<br>\n<br>\n具體步驟<br>\n<br>\n步驟一，確保Tor可以運行。<br>\n連上Tor Check測試。<br>\nhttps://check.torproject.org<br>\n<br>\n步驟二，安裝網頁伺服軟體。<br>\n1. 盡量安裝在根目錄，不要有非英文的路徑名。EX: E:\\Xampp<br>\n2. 使用系統管理員身分開啟Xampp-control。<br>\n3. 先勾選，再開啟Apache。有時會遇到錯誤，例如port占用，這時可配置，或直接把占用port的程式(用工作管理員)關掉。<br>\n配置，按Config，點Apache(httpd.conf)，在開啟的文件找「Listen」(可用Ctrl+F)，然後把後面的數字改成想要的，EX: 9487，存檔後回到Xampp控制面板按Stop，再重啟。<br>\n這樣做可以改變監聽的port，重啟後會顯示新ports。<br>\n4. 在一般瀏覽器輸入localhost:XXXX，localhost可以改成127.0.0.1，XXXX為Xampp的port，EX: 127.0.0.1:9453，沒特別設定的話port應該是80或8080。<br>\n如果顯示出Xampp預設頁面(自動導向dashboard)，代表server配置正確。<br>\n5. 在安裝Xampp的目錄下找到htdocs，此為網站主目錄。可以放入自己的html(若放入php得開MySQL，不提)<br>\n若不熟悉html，我提供一極簡範本，可直接複製貼上到記事本。<br>\n<br>\n&lt;!DOCTYPE html&gt;<br>\n&lt;html&gt;<br>\n&lt;body&gt;<br>\nParty all night<br>\n&lt;/body&gt;<br>\n&lt;/html&gt;<br>\n<br>\n把txt後綴改成html，並把名字改成英數模式。<br>\nEX: 新文字文件.txt改成1.html<br>\n重啟Apache後，輸入路徑名，EX: 127.0.0.1:9453/1.html<br>\n理應看到剛剛的Party all night。<br>\n<br>\n<br>\n步驟三，配置洋蔥服務。<br>\n<br>\n1. 新建一資料夾，取英數名，建議為根目錄，EX: E:\\0<br>\n2. 找到torrc。在Tor瀏覽器的資料夾之下找Browser\\TorBrowser\\Data\\Tor，或是直接搜尋torrc。<br>\n用記事本開啟之後，在HiddenServiceDir後面寫資料夾位置，EX: E:\\0。這是用來存洋蔥站資訊的地方，之後Tor會在此資料夾創立hostname。<br>\n然後在HiddenServicePort分別寫虛擬port、IP、重新導向的真port，EX: 80 127.0.0.1:9453，其中虛擬port是給洋蔥用戶看的。<br>\n3. 重新啟動Tor，然後會在剛剛的新建資料夾內發現private_key和hostname兩個文件。<br>\nhostname用記事本打開，會是16碼英數.onion，也就是洋蔥網站網址。<br>\n4. 等待片刻(可能要到五分鐘)，Tor正在把此網址傳播到各節點伺服器。<br>\n5. 在Tor瀏覽器貼上新洋蔥網址，會看到剛放的html，EX: Party all night.<br>\n<br>\n全程下來，一杯咖啡時間的可以完成，並不複雜。<br>\n在暗網(Tor)架了網站後，往後只要開著Tor和Web server(Xampp)，任何人都能利用此洋蔥網址訪問剛做好的網頁。<br>\n不過，此文省略很多步驟，因此適合用來實驗，而非真正供暗網(Tor)用戶瀏覽。","date":"2019-02-18","agreeCount":5,"discussionCount":0}