{"type":"answer","id":229309,"parentType":"question","parentId":22785,"uid":25544,"contents":"编辑于4月19日，之后（一两个星期左右）若是有空，可能会再更新最后一次，修复一些问题并加一些小功能。<br>\n<br>\n增加了文字排序、字串替换、添加干扰字（常用高频汉字）的功能，生成文字可被复制，下载。线条可选择水平或垂直。线条部份不想多做了（如随机每个文字的位置，让文字存在轻微重叠，添加背景干扰等等），觉得这已经够了，毕竟这功能对人工审查应该没多少用途，还是加密功能好。文字颜色的功能已可使用。<br>\n<br>\n图片下载功能还是有问题，下载的图片档案里依然看不到被生成的部份（虽然图片里确实有生成的内容），应该是比例的问题。<br>\n<br>\n由于字数问题（回复字数不得大于 20000 字），删除了部份之前版本的回覆，存档在此。<br>\nhttps://web.archive.org/web/20200419160206/https://pincong.rocks/question/22785<br>\n<br>\n拷贝以下代码到文档，将档案名改成 档案名.html （网页格式），即可在安全的浏览器上运行（浏览器不安全的话，我也没方法），无须联网。<br>\n<br>\n要拷贝的代码， &lt;<b>html</b>&gt;&nbsp; 为第一行，到 &lt;/<b>html</b>&gt; 为最后一行。<br>\n<br>\n&lt;<b>html</b>&gt;<br>\n&lt;<b>head</b>&gt;<br>\n&nbsp; &lt;meta charset=\"UTF-8\" /&gt;<br>\n&lt;/<b>head</b>&gt;<br>\n&lt;<b>style</b>&gt;<br>\n.tooltip {<br>\n&nbsp; position: relative;<br>\n&nbsp; display: inline-block;<br>\n&nbsp; border-bottom: 1px dotted black;<br>\n}<br>\n<br>\n.tooltip .tooltiptext {<br>\n&nbsp; visibility: hidden;<br>\n&nbsp; width: 120px;<br>\n&nbsp; background-color: #555;<br>\n&nbsp; color: #fff;<br>\n&nbsp; text-align: center;<br>\n&nbsp; border-radius: 6px;<br>\n&nbsp; padding: 5px 0;<br>\n&nbsp; position: absolute;<br>\n&nbsp; z-index: 1;<br>\n&nbsp; bottom: 125%;<br>\n&nbsp; left: 50%;<br>\n&nbsp; margin-left: -60px;<br>\n&nbsp; opacity: 0;<br>\n&nbsp; transition: opacity 0.3s;<br>\n}<br>\n<br>\n.tooltip .tooltiptext::after {<br>\n&nbsp; content: \"\";<br>\n&nbsp; position: absolute;<br>\n&nbsp; top: 100%;<br>\n&nbsp; left: 50%;<br>\n&nbsp; margin-left: -5px;<br>\n&nbsp; border-width: 5px;<br>\n&nbsp; border-style: solid;<br>\n&nbsp; border-color: #555 transparent transparent transparent;<br>\n}<br>\n<br>\n.tooltip:hover .tooltiptext {<br>\n&nbsp; visibility: visible;<br>\n&nbsp; opacity: 1;<br>\n}<br>\n&lt;/<b>style</b>&gt;<br>\n<br>\n&lt;<b>script</b> language=\"javascript\"&gt;<br>\nfunction $(obj) <br>\n{<br>\n&nbsp; return document.getElementById(obj);<br>\n}<br>\n<br>\nfunction isChecked(obj)<br>\n{<br>\n&nbsp; if (obj.checked)<br>\n&nbsp; {<br>\n&nbsp; &nbsp; return true;<br>\n&nbsp; }<br>\n&nbsp; return false;<br>\n}<br>\n<br>\nfunction resetRadio()<br>\n{<br>\n&nbsp; $(\"horizontalRightward_verticalDownward\").checked = true ;<br>\n&nbsp; $(\"noRandText\").checked = true ;<br>\n&nbsp; $(\"addRange\").value = 1 ;<br>\n&nbsp; $(\"notRepWord\").checked = true ;<br>\n&nbsp; $(\"lineMaxNumber\").checked = true ;<br>\n}<br>\n<br>\nfunction activeRadio ()<br>\n{<br>\n&nbsp; $(\"verticalDownward_horizontalLeftward\").checked = true ;<br>\n&nbsp; $(\"addRandText\").checked = true ;<br>\n&nbsp; $(\"repWord\").checked = true ;<br>\n&nbsp; $(\"lineMaxNumber\").checked = true ;<br>\n}<br>\n<br>\nfunction getCheckedRadio(radioName)<br>\n{<br>\n&nbsp; var arrRadioBtns = document.getElementsByName(radioName);<br>\n&nbsp; for ( i = 0 ; i &lt; arrRadioBtns.length ; i ++ )<br>\n&nbsp; {<br>\n&nbsp; &nbsp; if (arrRadioBtns[i].checked )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; return arrRadioBtns[i].value ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; return \"&nbsp; \" ;<br>\n}<br>\n<br>\nfunction reverseString(str)<br>\n{<br>\n&nbsp; return str.split(\"\").reverse().join(\"\");<br>\n}<br>\n<br>\nfunction insertString (str , index , value)<br>\n{<br>\n&nbsp; return str.substr(0,index) + value + str.substr(index);<br>\n}<br>\n<br>\nfunction getRndNum( min , max )<br>\n{<br>\n&nbsp; return Math.floor(Math.random() * (max-min) ) + min ;<br>\n}<br>\n<br>\nfunction getMaxLength ( arr )<br>\n{<br>\n&nbsp; var maxLength = 1 ;<br>\n&nbsp; for ( i = 0 ; i &lt; arr.length ; i ++ )<br>\n&nbsp; {<br>\n&nbsp; &nbsp; if ( maxLength &lt; arr[i].length )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; maxLength = arr[i].length ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; return maxLength;<br>\n}<br>\n<br>\nfunction rearrangeText() <br>\n{<br>\n&nbsp; &nbsp; var oText = $('originalText').value;<br>\n&nbsp; &nbsp; var alignment , horizontalDirection, verticalDirection ;<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; alignment = getCheckedRadio(\"order\");<br>\n&nbsp; &nbsp; //文字排序方向<br>\n&nbsp; &nbsp; if ( alignment[0] == \"R\" || alignment[1] == \"R\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; horizontalDirection = \"R\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; else<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; horizontalDirection = \"L\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; if ( alignment[0] == \"D\" || alignment[1] == \"D\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; verticalDirection = \"D\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; else<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; verticalDirection = \"U\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; var newString ;<br>\n&nbsp; &nbsp; var maxColumn = 1 ;<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; //替换文字<br>\n&nbsp; &nbsp; if($(\"repWord\").checked) <br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; var dict = $(\"replaceWordDict\").value ;<br>\n&nbsp; &nbsp; &nbsp; var splitDic , dicArray ;<br>\n&nbsp; &nbsp; &nbsp; splitDic = dict.split('\\n') ;<br>\n&nbsp; &nbsp; &nbsp; var orgPattern , repPattern, tempText = \"\" ;<br>\n&nbsp; &nbsp; &nbsp; for ( i = 0 ; i &lt; splitDic.length ; i ++ )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; dicArray = splitDic[i].split('|');<br>\n&nbsp; &nbsp; &nbsp; &nbsp; repPattern = dicArray[1].split(',');<br>\n&nbsp; &nbsp; &nbsp; &nbsp; tempText = repPattern[getRndNum(0,repPattern.length)];<br>\n&nbsp; &nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; var intIndexOfMatch = oText.indexOf( dicArray[0] );<br>\n<br>\n&nbsp; &nbsp; &nbsp; &nbsp; // Loop over the string value replacing out each matching substring.<br>\n&nbsp; &nbsp; &nbsp; &nbsp; while (intIndexOfMatch != -1)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; // Relace out the current instance.<br>\n&nbsp; &nbsp; &nbsp; &nbsp; oText = oText.replace( dicArray[0], tempText )<br>\n&nbsp; &nbsp; &nbsp; &nbsp; // Get the index of any next matching substring.<br>\n&nbsp; &nbsp; &nbsp; &nbsp; intIndexOfMatch = oText.indexOf( dicArray[0] );<br>\n&nbsp; &nbsp; &nbsp; &nbsp; tempText = repPattern[getRndNum(0,repPattern.length)];<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; // 添加干扰字串<br>\n&nbsp; &nbsp; var addRandText = false ;<br>\n&nbsp; &nbsp; var addRange, addText ;<br>\n&nbsp; &nbsp; if($(\"addRandText\").checked) <br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; addText = $('addText').value.split('\\n');<br>\n&nbsp; &nbsp; &nbsp; addRange = $(\"addRange\").value ;<br>\n&nbsp; &nbsp; &nbsp; var tempText = \"\" ;<br>\n&nbsp; &nbsp; &nbsp; for ( i = Number(addRange) ; i &lt; oText.length ; i += Number(addRange) + Number(tempText.length) )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; tempText = addText[getRndNum(0,addText.length)];<br>\n&nbsp; &nbsp; &nbsp; &nbsp; oText = insertString (oText , i , tempText) ;<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; var text = oText.split('\\n');<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; //若不是水平优先，则排序成垂直<br>\n&nbsp; &nbsp; if ( alignment[0] == \"U\" || alignment[0] == \"D\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; maxColumn = getMaxLength ( text ) ;<br>\n&nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; &nbsp; newString = new Array (maxColumn) ;<br>\n&nbsp; &nbsp; &nbsp; for ( i = 0 ; i &lt; maxColumn ; i ++ )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; newString[i] = new Array (text.length) ;<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; &nbsp; for ( i = 0 ; i &lt; text.length ; i ++ )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; for ( j = 0 ; j &lt; maxColumn ; j ++ )<br>\n&nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( j &gt;= text[i].length )<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newString[j][i] = \" \";<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newString[j][i] = text[i][j];<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; &nbsp; text = new Array (maxColumn) ;<br>\n&nbsp; &nbsp; &nbsp; for ( i = 0 ; i &lt; maxColumn ; i ++ )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; text[i] = newString[i].join(\"\");<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; //若不是向右，则逆转文字的横向排序<br>\n&nbsp; &nbsp; if (horizontalDirection == \"L\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; for ( i = 0 ; i &lt; text.length ; i ++ )<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; text[i] = reverseString(text[i]);<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; //若不是向下，则逆转文字的纵向排序<br>\n&nbsp; &nbsp; if ( verticalDirection == \"U\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; text.reverse();<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; $('resultText').value = text.join(\"\\n\") ;<br>\n}<br>\n<br>\nfunction canvasCoordinate ( isHorizontal , fsize , i , length )<br>\n{<br>\n&nbsp; var pn = -1, x0 = 0 , y0 = 0 , x1 = 0 , y1 = 0 ,x2 = 0 , y2 = 0 ;<br>\n&nbsp; if (Math.random &gt;= 0.5)<br>\n&nbsp; {<br>\n&nbsp; &nbsp; pn = 1;<br>\n&nbsp; }<br>\n&nbsp; x0 =&nbsp; (length * fsize / 4 ) + pn * getRndNum(0,length * fsize) / 4 ;<br>\n&nbsp; x1 = (length * fsize * 3 / 4 ) + pn * getRndNum(0,length * fsize) / 4 ;<br>\n&nbsp; x2 = length * fsize;<br>\n&nbsp; y0 = (fsize * i) + getRndNum(0,2 * fsize)&nbsp; ;<br>\n&nbsp; y1 = (fsize * i) + getRndNum(0,2 * fsize)&nbsp; ;<br>\n&nbsp; y2 = (fsize * i) + getRndNum(0,fsize)&nbsp; ;<br>\n&nbsp; <br>\n&nbsp; if ( isHorizontal )<br>\n&nbsp; {<br>\n&nbsp; &nbsp; return [x0,y0,x1,y1,x2,y2] ;<br>\n&nbsp; }<br>\n&nbsp; return [y0,x0,y1,x1,y2,x2] ;<br>\n}<br>\n<br>\nfunction drawCanvas() <br>\n{<br>\n&nbsp; rearrangeText();<br>\n&nbsp; var c = $('canvas');<br>\n&nbsp; var t = $('resultText');<br>\n&nbsp; var fsize = $('fsize').value;<br>\n&nbsp; var lnumber = $('lnumber').value;<br>\n&nbsp; var lwidth = $('lwidth').value;<br>\n&nbsp; var lines = t.value.split('\\n');<br>\n&nbsp; var columns = $('twidth').value;<br>\n&nbsp; <br>\n&nbsp; var colLength = 1 , maxLength = getMaxLength ( lines )&nbsp; ;<br>\n&nbsp; //限制每行的字数<br>\n&nbsp; if($(\"lineMaxNumber\").checked)<br>\n&nbsp; {<br>\n&nbsp; for (i = 0; i &lt; lines.length; i++) <br>\n&nbsp; {<br>\n&nbsp; &nbsp; if (lines[i].length &gt; columns)<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; var end = columns ;<br>\n&nbsp; &nbsp; &nbsp; var nLoop = Math.ceil(lines[i].length / columns) ;<br>\n&nbsp; &nbsp; &nbsp; for (j = 0; j &lt; nLoop ; j++)<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; end = columns ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; if (&nbsp; j &gt; 0 &amp;&amp; (j == (nLoop-1) ) )<br>\n&nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = lines[i].length % columns;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (end == 0)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = columns;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; lines.splice(i + j+1, 0, lines[i].substr(j * columns, end) );<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; end = i ;<br>\n&nbsp; &nbsp; &nbsp; i += Math.floor( lines[i].length / columns ) -1;<br>\n&nbsp; &nbsp; &nbsp; lines.splice(end ,1);<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; colLength = columns ;<br>\n&nbsp; }<br>\n&nbsp; else<br>\n&nbsp; {<br>\n&nbsp; &nbsp; colLength = maxLength ;<br>\n&nbsp; }<br>\n&nbsp; <br>\n&nbsp; c.width = (colLength + 2) * fsize ;<br>\n&nbsp; c.height = (lines.length + 3) * fsize ;<br>\n&nbsp; var ctx = c.getContext('2d') ;<br>\n&nbsp; ctx.clearRect(0, 0, canvas.width, canvas.height) ;<br>\n&nbsp; ctx.beginPath() ;<br>\n&nbsp; ctx.font = fsize + 'px Microsoft YaHei';<br>\n&nbsp; ctx.lineWidth = lwidth;<br>\n&nbsp; ctx.fillStyle = $(\"textcolor\").value;<br>\n&nbsp; <br>\n&nbsp; var direction = getCheckedRadio(\"lineDirection\");<br>\n&nbsp; if (direction == \"F\" )<br>\n&nbsp; {<br>\n&nbsp; &nbsp; direction = getCheckedRadio(\"order\");<br>\n&nbsp; &nbsp; if ( direction[0] == \"U\" || direction[0] == \"D\" )<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; direction = \"V\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; else<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; direction = \"H\" ;<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; <br>\n&nbsp; var canvasPos ;<br>\n&nbsp; for (i = 0; i &lt; lines.length; i++)<br>\n&nbsp; {<br>\n&nbsp; &nbsp; ctx.fillText(lines[i], 0, fsize * (i + 1));<br>\n&nbsp; &nbsp; <br>\n&nbsp; &nbsp; //水平画线<br>\n&nbsp; &nbsp; if (direction == \"H\")<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; for (j = 0; j &lt; lnumber; j++) <br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; ctx.moveTo(0, (i * fsize) + getRndNum ( 0 , fsize ) );<br>\n&nbsp; &nbsp; &nbsp; canvasPos = canvasCoordinate (true , fsize , i , colLength) ;<br>\n&nbsp; &nbsp; &nbsp; ctx.bezierCurveTo( canvasPos[0] , canvasPos[1] , canvasPos[2] , canvasPos[3] , canvasPos[4] , canvasPos[5] );<br>\n&nbsp; &nbsp; &nbsp; ctx.stroke();<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; <br>\n&nbsp; //垂直画线<br>\n&nbsp; if (direction == \"V\")<br>\n&nbsp; {<br>\n&nbsp; &nbsp; for (i = 0; i &lt; colLength &amp;&amp; i &lt; maxLength; i++)<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; for (j = 0; j &lt; lnumber; j++) <br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ctx.moveTo((i * fsize) +&nbsp; getRndNum ( 0 , fsize ) , 0 );<br>\n&nbsp; &nbsp; &nbsp; &nbsp; canvasPos = canvasCoordinate (false , fsize , i , lines.length) ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ctx.bezierCurveTo( canvasPos[0] , canvasPos[1] , canvasPos[2] , canvasPos[3] , canvasPos[4] , canvasPos[5] );<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ctx.stroke();<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n&nbsp; &nbsp; <br>\n&nbsp; var imageURI = c.toDataURL();<br>\n&nbsp; $('download').href = imageURI;<br>\n}<br>\n<br>\nfunction copyText()<br>\n{<br>\n&nbsp; var text = $(\"resultText\");<br>\n&nbsp; text.select();<br>\n&nbsp; text.setSelectionRange(0,99999);<br>\n&nbsp; document.execCommand(\"copy\");<br>\n}<br>\n<br>\nfunction download(filename, text)<br>\n{<br>\n&nbsp; &nbsp; var element = document.createElement('a');<br>\n&nbsp; &nbsp; element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));<br>\n&nbsp; &nbsp; element.setAttribute('download', filename);<br>\n<br>\n&nbsp; &nbsp; element.style.display = 'none';<br>\n&nbsp; &nbsp; document.body.appendChild(element);<br>\n<br>\n&nbsp; &nbsp; element.click();<br>\n<br>\n&nbsp; &nbsp; document.body.removeChild(element);<br>\n}<br>\n<br>\nfunction downloadText ()<br>\n{<br>\n&nbsp; // Generate download of RearrangeText.txt file with some content<br>\n&nbsp; &nbsp; var text = $(\"resultText\").value;<br>\n&nbsp; &nbsp; var filename = \"RearrangeText.txt\";<br>\n&nbsp; &nbsp; download(filename, text);<br>\n}<br>\n<br>\ndownload_img = function(el)<br>\n{<br>\n&nbsp; // get image URI from canvas object<br>\n&nbsp; var imageURI = document.getElementById(\"canvas\").toDataURL(\"image/jpg\");<br>\n&nbsp; el.href = imageURI;<br>\n};<br>\n<br>\n&lt;/<b>script</b>&gt;<br>\n<br>\n&lt;<b>body</b> style=\"text-align:center;\"&gt;<br>\n&lt;label&gt;&lt;b&gt;排序&lt;/b&gt;&lt;/label&gt;&lt;br/&gt;<br>\n&lt;p&gt;<br>\n&nbsp; &lt;label class=\"tooltip\"&gt;原文<br>\n&nbsp; &nbsp; &lt;span class=\"tooltiptext\"&gt;想要排序或画线的文字&lt;/span&gt;<br>\n&nbsp; &lt;/label&gt;<br>\n&nbsp; &nbsp; &nbsp; &lt;textarea id=\"originalText\" wrap=\"hard\" placeholder=\"请输入文字\" rows=\"8\" &gt;&lt;/textarea&gt;<br>\n&nbsp; &nbsp; &lt;/p&gt;<br>\n&lt;br/&gt;&lt;input type=\"button\" id=\"resetRadioBtn\" value=\"默认排序\" onclick=\"resetRadio();\"/&gt;<br>\n&lt;input type=\"button\" id=\"activeRadioBtn\" value=\"启用全部\" onclick=\"activeRadio();\"/&gt;&lt;br/&gt;<br>\n&lt;p&gt;<br>\n&lt;label class=\"tooltip\"&gt;文字排序方向<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;从哪个方向开始，到哪里（一共8种排序方式）。&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"horizontalRightward_verticalDownward\" value =\"RD\" checked&gt; 从左到右，从上到下(不变)&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"horizontalLeftward_verticalDownward\" value =\"LD\"&gt; 从右到左，从上到下&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"horizontalRightward_verticalUpward\" value =\"RU\" &gt; 从左到右，从下到上 &lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"horizontalLeftward_verticalUpward\" value =\"LU\"&gt; 从右到左，从下到上&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"verticalDownward_horizontalLeftward\" value =\"DL\" &gt; 从上到下，从右到左&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"verticalDownward_horizontalRightward\" value =\"DR\" &gt; 从上到下，从左到右&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"verticalUpward_horizontalLeftward\" value =\"UL\"&gt; 从下到上，从右到左&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"order\" id=\"verticalUpward_horizontalRightward\" value =\"UR\"&gt; 从下到上，从左到右&lt;br/&gt;&lt;br/&gt;<br>\n&lt;/p&gt;<br>\n<br>\n&lt;p&gt;<br>\n&lt;label class=\"tooltip\"&gt;是否替换文字<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;替换掉特定字串，针对直接对比字串的方式。（替换文字后才会进行字串添加）&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"ReplaceWord\" id=\"notRepWord\" value =\"N\" checked&gt; 不替换文字（默认）<br>\n&lt;input type=\"radio\" name=\"ReplaceWord\" id=\"repWord\" value =\"Y\"&gt; 替换文字&lt;br/&gt;<br>\n&lt;label class=\"tooltip\"&gt;替换字串<br>\n&lt;span class=\"tooltiptext\"&gt;替换掉特定字串，针对直接对比字串的方式，格式为每行一个替换词，在|符号前的是被替换的字串，在|符号后的是用来替换的字串。若是用来替换的字串大于1个，则用来替换的字串之间以,符号为间隔，会随机选择其中一个来进行替换。(可以搜索关键字字库)(依照被替换字串的排序替换，如文字包括12，有两个被替换字串1和12，字串库中被替换字串1在12前面，12就不会被替换，因为在碰到1时，1已经被替换掉了。)&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;textarea id=\"replaceWordDict\" rows=\"4\"&gt;1989|¹玖8九,3²*13*17,一九九零减1,1980加九<br>\n御坂美琴|炮姐,超电磁炮,BiliBili,哔哩哔哩<br>\n0|⁰<br>\n1|¹<br>\n2|²<br>\n3|³<br>\n4|⁴<br>\n5|⁵<br>\n6|⁶<br>\n7|⁷<br>\n8|⁸<br>\n9|⁹<br>\n一|壹,ONE<br>\n二|貳,TWO<br>\n三|參,THREE<br>\n四|肆,FOUR<br>\n五|伍,FIVE<br>\n六|陸,SIX<br>\n七|柒,SEVEN<br>\n八|捌,EIGHT<br>\n九|玖,NINE<br>\n十|拾,TEN<br>\n百|佰<br>\n千|仟<br>\n万|萬<br>\n亿|億<br>\n国家|郭嘉,Country&lt;/textarea&gt;&lt;br/&gt;<br>\n&lt;/p&gt;<br>\n<br>\n&lt;p&gt;<br>\n&lt;label class=\"tooltip\"&gt;是否随机添加文字<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;添加随机文字，针对直接对比字串的方式。（替换文字后才会进行字串添加）&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"randAddText\" id=\"noRandText\" value =\"N\" checked&gt; 不添加（默认）<br>\n&lt;input type=\"radio\" name=\"randAddText\" id=\"addRandText\" value =\"Y\"&gt; 添加&lt;br/&gt;<br>\n&lt;label class=\"tooltip\" &gt;添加间隔<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;每隔多少个字就添加一次随机文字字串。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;input type=\"number\" id=\"addRange\" value=\"1\"/&gt;&lt;br/&gt;<br>\n&lt;label class=\"tooltip\"&gt;添加字串<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;添加随机文字，针对直接对比字串的方式。每行为一个添加字串，会在所有字串里随机选择。可以搜索汉字的高出现频率字来加入字串库，避免字数频率统计。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;textarea id=\"addText\" rows=\"4\"&gt;的<br>\n我<br>\n是<br>\n了<br>\n来<br>\n们<br>\n你<br>\n他<br>\n她<br>\n大<br>\n和<br>\n好<br>\n个<br>\n说<br>\n到<br>\n以<br>\n一<br>\n在<br>\n有<br>\n这<br>\n为<br>\n我们<br>\n正能量&lt;/textarea&gt;&lt;br/&gt;<br>\n&lt;/p&gt;<br>\n<br>\n<br>\n&lt;label class=\"tooltip\" &gt;生成文字<br>\n&nbsp; &nbsp; &lt;span class=\"tooltiptext\"&gt;依照以上设定及次序生成文字。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;textarea id=\"resultText\" rows=\"4\"&gt;文字生成结果&lt;/textarea&gt;&lt;br/&gt;<br>\n&lt;input type=\"button\" id=\"generateText\" value=\"点击以生成文字\" onclick=\"rearrangeText();\"/&gt;&lt;br/&gt;&lt;br/&gt;<br>\n&lt;input type=\"button\" id=\"copyText\" value=\"拷贝生成文字结果到剪貼板\" onclick=\"copyText();\"/&gt;&lt;br/&gt;&lt;br/&gt;<br>\n&lt;input type=\"button\" id=\"downloadTextBtn\" value=\"下载文字txt档案 RearrangeText.txt\" onclick=\"downloadText();\"/&gt;&lt;br/&gt;&lt;br/&gt;<br>\n&lt;label class=\"tooltip\" &gt;&lt;b&gt;画线&lt;/b&gt;<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;在文字上画线。&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;p&gt;&lt;label class=\"tooltip\"&gt;字号<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;字体的大小。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;input type=\"text\" value=\"20\" id=\"fsize\" /&gt;<br>\n&lt;/p&gt;<br>\n&lt;p&gt;<br>\n&lt;label class=\"tooltip\" &gt;是否启用每行字数<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;启用则限制每行超过字数的文字会被换行。对于从下到上的排序，启用后，原超过字数的每行的内部被换行的排序是依照上到下排序的，而不是从下到上。&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"lineMaxNum\" id=\"lineMaxNumber\" value =\"Y\" checked&gt; 启用（自定义字数）（默认）<br>\n&lt;input type=\"radio\" name=\"lineMaxNum\" id=\"noLineMaxNumber\" value =\"N\"&gt; 不启用&lt;br/&gt;<br>\n&lt;/p&gt;<br>\n&lt;p&gt;&lt;label class=\"tooltip\"&gt;每行字数<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;每行最大允许字数，超过则会自动换行，数字，不低于1。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;input type=\"text\" value=\"20\" id=\"twidth\" /&gt;<br>\n&lt;/p&gt;<br>\n&lt;p&gt;&lt;label class=\"tooltip\"&gt;颜色<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;文字的颜色。&lt;/span&gt;<br>\n&lt;/label&gt;<br>\n&lt;input type=\"color\" id=\"textcolor\" value=\"#000000\" /&gt;<br>\n&lt;/p&gt;<br>\n&lt;p&gt;<br>\n&lt;label class=\"tooltip\"&gt;干扰线条方向<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;是默认跟随文字的排序来画水平/垂直线条，或者固定为水平线条或垂直线条。&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"lineDirection\" id=\"lineDFollowWord\" value =\"F\" checked&gt; 跟随文字排序（默认）<br>\n&lt;input type=\"radio\" name=\"lineDirection\" id=\"lineDHorizontal\" value =\"H\"&gt; 水平&lt;br/&gt;<br>\n&lt;input type=\"radio\" name=\"lineDirection\" id=\"lineDVertical\" value =\"V\"&gt; 垂直&lt;br/&gt;<br>\n&lt;/p&gt;<br>\n&lt;p&gt;&lt;label class=\"tooltip\"&gt;每行干扰线条数<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;线条数量，太多会看不清楚。&lt;/span&gt;<br>\n&lt;/label&gt; &lt;input type=\"text\" id=\"lnumber\" value=\"2\" /&gt;&lt;/p&gt;<br>\n&lt;p&gt;&lt;label class=\"tooltip\"&gt;干扰线宽度<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;线条宽度，太多会看不清楚。&lt;/span&gt;<br>\n&lt;/label&gt; &lt;input type=\"text\" id=\"lwidth\" value=\"0.3\" /&gt;&lt;/p&gt;<br>\n&lt;p&gt;&lt;button type=\"button\" onclick=\"drawCanvas()\"&gt;生成&lt;/button&gt;&lt;/p&gt;<br>\n&lt;label class=\"tooltip\"&gt;生成结果<br>\n&nbsp; &lt;span class=\"tooltiptext\"&gt;生成的画线结果。（会重新进行一次文字生成，而不是直接拿之前文字生成的结果（若有）。）&lt;/span&gt;<br>\n&lt;/label&gt;&lt;br/&gt;&lt;br/&gt;<br>\n<br>\n&lt;canvas id=\"canvas\"&gt;&lt;/canvas&gt;<br>\n&nbsp; &nbsp; <br>\n&lt;a id=\"download\" download=\"antiCensor.jpg\" href=\"\" onclick=\"download_img(this);\"&gt;Download to antiCensor.jpg&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;<br>\n&lt;label&gt;请勿将此程序用于任何会伤害到他人的地方。&lt;/label&gt;<br>\n<br>\n&lt;/<b>body</b>&gt;<br>\n<br>\n&lt;/<b>html</b>&gt;<br>\n<br>\n好了，代码结束。<br>\n<br>\n＿＿＿＿＿＿＿＿＿＿＿＿＿<br>\n要不设个Array，如果lines[i]里面的字数大过输入字数column，就循环substr出来column长度（最后一个是剩余长度），push进去array里面，小过column就正常push进去lines[i]的数据。<br>\n<br>\n最后再从那个array 里面提取。<br>\n<br>\n（很久没碰代码了，又不方便去试错看value在哪里跑掉，只是建议）<br>\n<br>\n（粗试一下，猜测你取消的部分可能是因为实时加数据，导致loop无限循环，建议自己在错误范围加一堆输出，看那些value在哪个循环开始不对劲，怎样不对劲）<br>\n<br>\n半成品，还有一点问题。太久没碰javascript了，不想继续了。<br>\n<br>\nfor (i = 0; i &lt; lines.length; i++)&nbsp;<br>\n{<br>\n&nbsp; &nbsp;if (lines[i].length &gt; colomns)<br>\n&nbsp; &nbsp;{<br>\n&nbsp; &nbsp; &nbsp;&nbsp;<b>var end = colomns ;</b><br>\n<b>&nbsp; &nbsp; &nbsp; var nLoop = Math.ceil(lines[i].length / colomns) ;</b><br>\n&nbsp; &nbsp; &nbsp; for (j = 0; j &lt;&nbsp;<b>nLoop</b> ; j++)<br>\n&nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<b>end = colomns ;</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (&nbsp; j &gt; 0 &amp;&amp; (j == (nLoop-1) ) )</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;end = lines[i].length % colomns;</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (end == 0)</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = colomns;</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</b><br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b>}<br>\n<b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lines.splice(i + j+1, 0, lines[i].substr(j * colomns, end) );</b><br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp;&nbsp;<b>end = i ;</b><br>\n<b>&nbsp; &nbsp; &nbsp; i += Math.floor( lines[i].length / colomns ) -1;</b><br>\n<b>&nbsp; &nbsp; &nbsp;&nbsp;lines.splice(&nbsp;end ,1);</b><br>\n&nbsp; &nbsp; }<br>\n&nbsp;}<br>\n<br>\n//没改内容，觉得影响输出显示的行数的部分应该来自这边<br>\nfor (i = 0; i &lt; lines.length; i++) {<br>\n&nbsp; &nbsp; ctx.fillText(lines[i], 0, fsize * (i + 1));<br>\n&nbsp; &nbsp; for (j = 0; j &lt; lnumber; j++) {<br>\n&nbsp; &nbsp; &nbsp; ctx.moveTo(0, fsize * ((j + Math.random() + 1) / lines.length + i));<br>\n&nbsp; &nbsp; &nbsp; ctx.quadraticCurveTo(<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ((1 + Math.random()) / 3) * colomns * fsize,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; fsize * (i + (j + Math.random() + 1) / lines.length),<br>\n&nbsp; &nbsp; &nbsp; &nbsp; colomns * fsize,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; fsize * ((j + Math.random() + 1) / lines.length + i)<br>\n&nbsp; &nbsp; &nbsp; );<br>\n&nbsp; &nbsp; &nbsp; ctx.stroke();<br>\n&nbsp; &nbsp; }<br>\n&nbsp; }<br>\n<br>\n我修改的还是有问题，没找到在哪里会限制到输出显示的行数。如果输入的行数太短，转化后显示的行数不完全，会吞掉几行，要自己在输入那边多打几个换行。（自己试一些输入，有的输出又没问题，有的输入又会出现显示不完全的问题）<br>\n＿＿＿＿＿＿＿＿＿＿<br>\n今天再看看，<b>找到限制行数显示的问题在哪里了，是设定canvas的位置(height)早了（因为按照字数切完后，list的长度会改变（多数是增加，超过3就有问题了）），我重新修了一下declare c.height位置（移到切完字数的后面）（本来想把按字数切的放去recursive函数，后来没成功，就放弃了），看起来没问题了。</b>加了一个下载图片，不过图片虽然有内容，但是比例不对。<br>\n<br>\nscript<br>\n<br>\n&nbsp; function $(obj) <br>\n&nbsp; {<br>\n&nbsp; &nbsp; return document.getElementById(obj);<br>\n&nbsp; }<br>\n&nbsp;&nbsp;<br>\n&nbsp; function submit() <br>\n&nbsp; {<br>\n&nbsp; var c = $('canvas');<br>\n&nbsp; var t = $('textbox');<br>\n&nbsp; var fsize = $('fsize').value;<br>\n&nbsp; var lnumber = $('lnumber').value;<br>\n&nbsp; var lwidth = $('lwidth').value;<br>\n&nbsp; var lines = t.value.split('\\n');<br>\n&nbsp; var columns = $('twidth').value;<br>\n&nbsp; <br>\n&nbsp; &nbsp; for (i = 0; i &lt; lines.length; i++) <br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; if (lines[i].length &gt; columns)<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; var end = columns ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; var nLoop = Math.ceil(lines[i].length / columns) ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; for (j = 0; j &lt; nLoop ; j++)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = columns ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (&nbsp; j &gt; 0 &amp;&amp; (j == (nLoop-1) ) )<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = lines[i].length % columns;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (end == 0)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = columns;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lines.splice(i + j+1, 0, lines[i].substr(j * columns, end) );<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; &nbsp; end = i ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; i += Math.floor( lines[i].length / columns ) -1;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; lines.splice(end ,1);<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; <br>\n&nbsp; &nbsp; //放在list整理好的后面就没问题了，因为是用lines.length 来 + 3<br>\n&nbsp; &nbsp; c.width = (columns + 1) * fsize ;<br>\n&nbsp; &nbsp; c.height = (lines.length + 3) * fsize ;<br>\n&nbsp; &nbsp; var ctx = c.getContext('2d') ;<br>\n&nbsp; &nbsp; ctx.clearRect(0, 0, canvas.width, canvas.height) ;<br>\n&nbsp; &nbsp; ctx.beginPath() ;<br>\n&nbsp; &nbsp; ctx.font = fsize + 'px Microsoft YaHei';<br>\n&nbsp; &nbsp; ctx.lineWidth = lwidth;<br>\n<br>\n&nbsp; &nbsp; //我调整了一下我想要的画线方式<br>\n&nbsp; &nbsp; for (i = 0; i &lt; lines.length; i++)<br>\n&nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; ctx.fillText(lines[i], 0, fsize * (i + 1));<br>\n&nbsp; &nbsp; &nbsp; var pn = -1 ;<br>\n&nbsp; &nbsp; &nbsp; for (j = 0; j &lt; lnumber; j++) {<br>\n<br>\n&nbsp; &nbsp; &nbsp; &nbsp; //随机X的位置是在1/4和3/4的左边（不超过1/4的宽度）还是右边（不超过1/4的宽度）<br>\n&nbsp; &nbsp; &nbsp; &nbsp; pn = -1 ;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; if (Math.random &gt;= 0.5)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; {<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pn = 1;<br>\n&nbsp; &nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; &nbsp; <br>\n&nbsp; &nbsp; &nbsp; &nbsp; //改成了这个函数，多一个点，线条应该会比较多变<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ctx.bezierCurveTo(<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (columns * fsize / 4 ) + pn * (Math.floor(Math.random() * columns * fsize )) / 4 ,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (fsize * i) + Math.floor(Math.random() * 2 * fsize) ,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (columns * fsize * 3 / 4 ) + pn * (Math.floor(Math.random() * columns * fsize )) / 4 ,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (fsize * i) + Math.floor(Math.random() * 2 * fsize) ,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns * fsize,<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (fsize * i) + Math.floor(Math.random() * fsize)<br>\n&nbsp; &nbsp; &nbsp; &nbsp; );<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ctx.stroke();<br>\n&nbsp; &nbsp; &nbsp; }<br>\n&nbsp; &nbsp; }<br>\n&nbsp; &nbsp; //图片下载，测试后，觉得下载的内容比例不对<br>\n&nbsp; &nbsp; var imageURI = c.toDataURL();<br>\n&nbsp; &nbsp; $('download').href = imageURI;<br>\n&nbsp; }<br>\n&nbsp; <br>\n<br>\nHTML body<br>\n&nbsp; &nbsp; &lt;p&gt;<br>\n&nbsp; &nbsp; &nbsp; &lt;textarea id=\"textbox\" wrap=\"hard\" placeholder=\"请输入文字\" &gt;&lt;/textarea&gt;<br>\n&nbsp; &nbsp; &lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;&lt;label&gt;字号&lt;/label&gt;&lt;input type=\"text\" value=\"20\" id=\"fsize\" /&gt;&lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;&lt;label&gt;每行字数&lt;/label&gt;&lt;input type=\"text\" value=\"20\" id=\"twidth\" /&gt;&lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;<br>\n&nbsp; &nbsp; &nbsp; &lt;label&gt;颜色&lt;/label&gt; &lt;input type=\"color\" id=\"textcolor\" value=\"#000000\" /&gt;<br>\n&nbsp; &nbsp; &lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;<br>\n&nbsp; &nbsp; &nbsp; &lt;label&gt;每行干扰线条数&lt;/label&gt; &lt;input type=\"text\" id=\"lnumber\" value=\"2\" /&gt;<br>\n&nbsp; &nbsp; &lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;<br>\n&nbsp; &nbsp; &nbsp; &lt;label&gt;干扰线宽度&lt;/label&gt; &lt;input type=\"text\" id=\"lwidth\" value=\"0.3\" /&gt;<br>\n&nbsp; &nbsp; &lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;p&gt;&lt;button type=\"button\" onclick=\"submit()\"&gt;生成&lt;/button&gt;&lt;/p&gt;<br>\n&nbsp; &nbsp; &lt;canvas id=\"canvas\"&gt;&lt;/canvas&gt;<br>\n&nbsp; &nbsp; &lt;a id=\"download\" download=\"antiCensor.jpg\" href=\"\" onclick=\"download_img(this);\"&gt;Download to antiCensor.jpg&lt;/a&gt;<br>\n&nbsp;＿＿＿＿＿＿＿＿＿＿＿<br>\n最近几天若是有空，会更新一些功能，也许会加个自定义文字、数字替换功能，也许会加个选择从左到右或相反及从上到下或相反的显示选项，和直线或横线的选项。到时若是有增加其他功能，会编辑增加在此答案的最上方。","date":"2020-04-04","agreeCount":8,"discussionCount":5}